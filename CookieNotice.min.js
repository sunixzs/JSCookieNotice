(function(a,d){'use strict';class g{constructor(h){if(this.settings={storageName:'CookieNotice',storageLifetime:null,uriStyles:'Plugins/CookieNotice/styles.css',uriContent:'Plugins/CookieNotice/Content.html',buttonQuerySelector:'#cookie-notice-confirmed',container:d.createElement('DIV'),onContentLoaded:function(){},onButtonClicked:function(k){k.removeContainer()}},'object'==typeof h)for(var j in h)h.hasOwnProperty(j)&&'undefined'!=typeof this.settings[j]&&(this.settings[j]=h[j]);return this.hasStorage='localStorage'in a&&a.localStorage,this.isConfirmed()||(this.loadStyles(),this.loadContent()),this}setConfirmed(){var h=!this.hasStorage;if(!h)try{localStorage.setItem(this.settings.storageName,new Date().getTime())}catch(j){h=!0}h&&(d.cookie=this.settings.storageName+'='+new Date().getTime()+'; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/')}isConfirmed(){var h=0,j=!this.hasStorage;if(!j)try{if(h=parseInt(localStorage.getItem(this.settings.storageName)),!h)return!1}catch(p){j=!0}if(j){for(var n,k=this.settings.storageName+'=',l=d.cookie.split(';'),m=0;m<l.length;m++){for(n=l[m];' '===n.charAt(0);)n=n.substring(1,n.length);0===n.indexOf(k)&&(h=parseInt(n.substring(k.length,n.length)))}if(!h)return!1}if(this.settings.storageLifetime){var o=new Date;return o.setTime(h-1e3*this.settings.storageLifetime),h>o.getTime()}return!0}removeContainer(){this.settings.container&&this.settings.container.parentNode.removeChild(this.settings.container)}loadStyles(){if(this.settings.uriStyles){var h=d.createElement('link');h.setAttribute('rel','stylesheet'),h.setAttribute('type','text/css'),h.setAttribute('href',this.settings.uriStyles),d.querySelector('head').appendChild(h)}}loadContent(){var h=this,j=new XMLHttpRequest;j.open('GET',this.settings.uriContent),j.addEventListener('load',function(){if(200<=j.status&&300>j.status){h.settings.container.innerHTML+=j.responseText,'function'==typeof h.settings.onContentLoaded&&h.settings.onContentLoaded(h);var l=d.querySelectorAll(h.settings.buttonQuerySelector);if(l.length)for(var m=0;m<l.length;m++)l[m].addEventListener('click',function(){h.setConfirmed(),'function'==typeof h.settings.onButtonClicked?h.settings.onButtonClicked(h):h.removeContainer()},!1)}else console.warn(j.statusText,j.responseText)}),j.send()}}'function'==typeof define&&define.amd?define(function(){return g}):a.CookieNotice=g})(window,document);
