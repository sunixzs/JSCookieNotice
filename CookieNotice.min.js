!function(t,e){"use strict";function n(n){if(this.settings={storageName:"CookieNotice",storageLifetime:null,uriStyles:"Plugins/CookieNotice/styles.css",uriContent:"Plugins/CookieNotice/Content.html",buttonQuerySelector:"#cookie-notice-confirmed",container:e.createElement("DIV"),onContentLoaded:function(t){},onButtonClicked:function(t){t.removeContainer()}},"object"==typeof n)for(var i in n)n.hasOwnProperty(i)&&void 0!==this.settings[i]&&(this.settings[i]=n[i]);this.hasStorage="localStorage"in t&&t.localStorage,this.setConfirmed=function(){var t=!this.hasStorage;if(!t)try{localStorage.setItem(this.settings.storageName,(new Date).getTime())}catch(e){t=!0}t&&(e.cookie=this.settings.storageName+"="+(new Date).getTime()+"; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/")},this.isConfirmed=function(){var t=0,n=!this.hasStorage;if(!n)try{if(!(t=parseInt(localStorage.getItem(this.settings.storageName))))return!1}catch(t){n=!0}if(n){for(var i=this.settings.storageName+"=",s=e.cookie.split(";"),o=0;o<s.length;o++){for(var r=s[o];" "===r.charAt(0);)r=r.substring(1,r.length);0===r.indexOf(i)&&(t=parseInt(r.substring(i.length,r.length)))}if(!t)return!1}if(this.settings.storageLifetime){var a=new Date;return a.setTime(t-1e3*this.settings.storageLifetime),t>a.getTime()}return!0},this.removeContainer=function(){this.settings.container&&this.settings.container.parentNode.removeChild(this.settings.container)},this.loadStyles=function(){if(this.settings.uriStyles){var t=e.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",this.settings.uriStyles),e.querySelector("head").appendChild(t)}},this.loadContent=function(){var t=this,n=new XMLHttpRequest;n.open("GET",this.settings.uriContent),n.addEventListener("load",function(i){if(n.status>=200&&n.status<300){t.settings.container.innerHTML+=n.responseText,"function"==typeof t.settings.onContentLoaded&&t.settings.onContentLoaded(t);var s=e.querySelectorAll(t.settings.buttonQuerySelector);if(s.length)for(var o=0;o<s.length;o++)s[o].addEventListener("click",function(){t.setConfirmed(),"function"==typeof t.settings.onButtonClicked?t.settings.onButtonClicked(t):t.removeContainer()},!1)}else console.warn(n.statusText,n.responseText)}),n.send()},this.isConfirmed()||(this.loadStyles(),this.loadContent())}"function"==typeof define&&define.amd?define(function(){return n}):t.CookieNotice=n}(window,document);
